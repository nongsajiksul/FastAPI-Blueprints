# 1. 머리말

## 왜 이런 글을 쓰게 되었을까?

두 필자는 이제 개발경력이 3~4년차에 접어드는 개발자들입니다. 주니어라고 하기엔 연차가 조금 있지만, 시니어라고 하기엔 아직 한참 모자른 중니어로 달려가는 위치입니다. 

두 필자의 분야를 굳이 나눈다면 백엔드 개발이겠지만(아시다시피 백엔드의 범위는 실로 광범위합니다.), 사실 실무에서 API 개발을 메인으로 하고 있지는 않습니다.  

그러던 와중 함께 토이 프로젝트를 하게 되었는데, 프로젝트 기술스택을 정하면서 여러가지 이유로 FastAPI를 사용해 API를 만들기로 결정하게 되었습니다.

이 글은 그런 두 필자가 같이 토이 프로젝트에 쓰일 API들을 만드는 과정에서 공부한 것과 고민한 것들을 담아 공유하기 위해 작성되었습니다.  



## 우리가 제시하는 FastAPI Blueprints 란?

필자들은 모두 FastAPI를 사용해본 경험이 없었기 때문에 프로젝트 구조를 어떻게 가져가는 것이 좋을지 고민하게 되었습니다.  

너무나 감사하게도 코딩도장 서비스를 운영하는 박응용님께서 [점프 투 FastAPI](https://wikidocs.net/177374) 라는 책에서 FastAPI를 활용하는 프로젝트의 구조를 다뤄주셔서 둘 다 이 내용을 정독하였고 이를 따라가려고 하였습니다. 

그러던 도중, 문득 FastAPI를 개발한 개발자는 어떤 방식으로 이를 활용할지 궁금하여 찾아보게 되었습니다.  

마침 FastAPI를 개발한 개발자분의 Github에는 FastAPI의 기본적인 템플릿이 있었습니다. (해당 Repository는 [여기](https://github.com/tiangolo/full-stack-fastapi-template)에 링크를 걸어두겠습니다.)

이 템플릿은 박응용님이 다뤄주신 것과 다른 부분이 몇 가지 있었습니다.  

첫 번째로, DB를 다룰 때(세션 생성, 테이블 정의, model정의 등) 대부분 `sqlalchemy` 라이브러리 대신 `SQLModel`을 사용하고 있습니다.  

분명 `sqlalchemy`는 복잡한 기능까지 제공하는 좋은 라이브러리이지만 아래의 내용들에 대해 고민해봐야했습니다.  

- `sqlalchemy`는 DB 세션을 명시적으로 관리해야하지만 `SQLModel`은 자동으로 관리됨 
- `SQLModel`은 `Pydantic`과의 통합이 가능하여 데이터 모델 유효성 검증 등을 간단히 할 수 있음

이 내용들을 고민해보았을 때 `sqlalchemy`를 사용하기보다 `SQLModel`를 사용하는 것이 더 좋다는 생각이 들었습니다.

두 번째로, 도메인 내 모듈별 파일 구조가 아닌 모듈 내 도메인별 파일 구조를 가지고 있습니다.  

모듈 내 도메인별 파일 구조는 규모가 큰 프로젝트에서 많이 사용하는데, 저희가 진행할 프로젝트는 많은 추가 기획을 가지고 있었습니다.  

프로젝트 구조의 경우 추후에 변경하는 것이 쉽지 않기 때문에 처음부터 모듈 내 도메인별 파일 구조를 채택하고자 했습니다.

그 외에도, FastAPI 기본 템플릿에서 사용하고 있는 기술스택이 우리가 정해둔 것과 거의 일치하여 참고할 부분이 더 많았습니다.(DB, 프론트엔드 프레임워크 등) 

그래서 우리는 FastAPI 개발자분이 제시하는 템플릿에 준하는 프로젝트 구조를 채택하기로 하였습니다. 

그리고 우리에게 맞게 약간의 변경과 추가를 통해 다듬었으며, 이것이 우리가 제시하는 FastAPI Blueprints입니다.  



## 마치며

우리가 이 글에서 제시하는 구조들은 FastAPI 개발자분이 제시한 것과 크게 다르지 않습니다. 

우리가 제시하는 구조가 정답이 아닐 수 있고, 혹자에게는 그 분의 것을 따라가는 것이 더 좋은 방법일 수도 있습니다. 

하지만 이 글에는 템플릿만 제시하는 것이 아니라 우리가 템플릿을 따라가면서 공부한 많은 지식과 실제 프로젝트에 적용하면서 생긴 많은 고민들에 대해서도 담고 있습니다.

많이 부족한 글이지만,  누군가 우리와 동일한 고민을 하고 동일한 문제에 부딪혔을 때 이 글이 그들에게 도움이 되었으면 합니다.  









